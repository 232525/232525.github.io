---
title: "LeetCode32-æœ€é•¿æœ‰æ•ˆæ‹¬å·"
author: curya
date: 2022-04-07  13:46 +0800
categories: [LeetCode]
tags: [algorithm, leetcode]
math: true
mermaid: true
---

## 1. é¢˜ç›®æè¿°
+ æ¥æºï¼šåŠ›æ‰£ï¼ˆLeetCodeï¼‰
+ é“¾æ¥ï¼šhttps://leetcode-cn.com/problems/longest-valid-parentheses \
è‘—ä½œæƒå½’é¢†æ‰£ç½‘ç»œæ‰€æœ‰ã€‚å•†ä¸šè½¬è½½è¯·è”ç³»å®˜æ–¹æˆæƒï¼Œéå•†ä¸šè½¬è½½è¯·æ³¨æ˜å‡ºå¤„ã€‚

ç»™ä½ ä¸€ä¸ªåªåŒ…å«`'('`å’Œ`')'`çš„å­—ç¬¦ä¸²ï¼Œæ‰¾å‡ºæœ€é•¿æœ‰æ•ˆï¼ˆæ ¼å¼æ­£ç¡®ä¸”è¿ç»­ï¼‰æ‹¬å·å­ä¸²çš„é•¿åº¦ã€‚

ç¤ºä¾‹ 1ï¼š
```
è¾“å…¥ï¼šs = "(()"
è¾“å‡ºï¼š2
è§£é‡Šï¼šæœ€é•¿æœ‰æ•ˆæ‹¬å·å­ä¸²æ˜¯ "()"
```

ç¤ºä¾‹ 2ï¼š
```
è¾“å…¥ï¼šs = ")()())"
è¾“å‡ºï¼š4
è§£é‡Šï¼šæœ€é•¿æœ‰æ•ˆæ‹¬å·å­ä¸²æ˜¯ "()()"
```
ç¤ºä¾‹ 3ï¼š
```
è¾“å…¥ï¼šs = ""
è¾“å‡ºï¼š0
```

æç¤ºï¼š
```
0 <= s.length <= 3 * 104
s[i] ä¸º '(' æˆ– ')'
```

## 2. é¢˜è§£
### 2.1 ä¸ªäººæ€è·¯
ï¼ˆæ¯”è¾ƒèœï¼Œéå®˜æ–¹é¢˜è§£ï¼Œ[å®˜æ–¹é¢˜è§£](https://leetcode-cn.com/problems/longest-valid-parentheses/solution/zui-chang-you-xiao-gua-hao-by-leetcode-solution/)æ›´ğŸ‚ğŸºï¼Œå¤æ‚åº¦æ›´ä½ï¼‰

__æ€è·¯__: æ¶‰åŠåˆ°æ‹¬å·åŒ¹é…ï¼Œç¬¬ä¸€ååº”å°±æ˜¯ä½¿ç”¨ __æ ˆ__ ï¼Œéå†å­—ç¬¦ä¸²ï¼Œå·¦æ‹¬å·`(`åˆ™å…¥æ ˆï¼Œå³æ‹¬å·`)`åˆ™åˆ¤æ–­æ˜¯å¦èƒ½åŒ¹é…å¹¶å‡ºæ ˆä¸€ä¸ªå·¦æ‹¬å·`(`ï¼Œè¿™æ ·å¯ä»¥å¾ˆç®€å•çš„æ‰¾å‡ºæ¥è¾“å…¥å­—ç¬¦ä¸²ä¸­æœ‰å¤šå°‘å¯¹èƒ½å¤ŸåŒ¹é…ä¸Šçš„æ‹¬å·ã€‚__ä½†æ˜¯__ï¼Œé¢˜ç›®è¦æ±‚çš„æ˜¯æ‰¾å‡º __æœ€é•¿æœ‰æ•ˆï¼ˆæ ¼å¼æ­£ç¡®ä¸”è¿ç»­ï¼‰æ‹¬å·å­ä¸²çš„é•¿åº¦__ï¼Œåªæ‰¾å‡ºèƒ½å¤ŸåŒ¹é…çš„æ‹¬å·å¯¹æ•°æ˜¯æ²¡åŠæ³•ä¿è¯å®ƒä»¬ä¹‹é—´æ˜¯è¿ç»­çš„ã€‚

+ ä¾‹å¦‚ï¼šå¯¹äºå­—ç¬¦ä¸²`"(()(()"`ï¼Œé€šè¿‡å…¥æ ˆå‡ºæ ˆæ“ä½œï¼Œæˆ‘ä»¬å¯ä»¥å¾—åˆ°è¯¥å­—ç¬¦ä¸²ä¸­æœ‰2å¯¹èƒ½å¤ŸåŒ¹é…çš„æ‹¬å·ï¼Œä½†æ˜¯2å¯¹æ‹¬å·ä¹‹é—´å¹¶ä¸è¿ç»­ï¼Œå› æ­¤å®é™…çš„æœ€é•¿æœ‰æ•ˆæ‹¬å·å­ä¸²çš„é•¿åº¦ä¸º2è€Œä¸æ˜¯4ã€‚

é‚£ä¹ˆå¦‚ä½•åœ¨æ‰¾åˆ°çš„åŒ¹é…æ‹¬å·å¯¹çš„åŸºç¡€ä¸Šï¼Œå»è®¡ç®—çœŸæ­£çš„æœ€é•¿æœ‰æ•ˆæ‹¬å·å­ä¸²é•¿åº¦å‘¢ï¼Ÿ__é€šè¿‡åˆ¤æ–­å®ƒä»¬æ˜¯å¦è¿ç»­å³å¯ï¼__

+ ç»§ç»­ä»¥å­—ç¬¦ä¸²`"(()(()"`ä¸ºä¾‹ï¼Œæ‰¾åˆ°çš„ä¸¤å¯¹æ‹¬å·ä½ç½®ä¸º`[[1, 2], [4, 5]]`ï¼Œå®ƒä»¬ä¹‹é—´å°‘äº†ä¸ª`3`ï¼Œå› æ­¤å¹¶ä¸è¿ç»­ï¼ˆè¢«åˆ†æˆäº†2ä¸ªå—ï¼‰ï¼Œæ‰€ä»¥ä¸èƒ½è®¡ç®—æ•´ä½“çš„é•¿åº¦ï¼Œè€Œåº”è¯¥é€‰æ‹©2ä¸ªå—ä¸­é•¿åº¦è¾ƒé•¿è€…ä½œä¸ºè¾“å‡ºã€‚

### 2.2 ç®—æ³•æµç¨‹
1. åˆ›å»ºä¸¤ä¸ªæ ˆï¼Œå‘½åä¸º`stack_left`å’Œ`stack_right`ï¼Œåˆ†åˆ«ç”¨æ¥å­˜å‚¨å·¦æ‹¬å·ä¿¡æ¯å’ŒåŒ¹é…åˆ°çš„å®Œæ•´æ‹¬å·ä¿¡æ¯ï¼›
2. éå†è¾“å…¥å­—ç¬¦ä¸²ï¼Œå¦‚æœå½“å‰å­—ç¬¦ä¸ºå·¦æ‹¬å·`(`ï¼Œåˆ™å°†å…¶ä¸‹æ ‡æ¨å…¥`stack_left`ï¼›å¦‚æœå½“å‰å­—ç¬¦ä¸ºå³æ‹¬å·`)`ï¼Œåˆ™åˆ¤æ–­`stack_left`ä¸­æ˜¯å¦ä¸ºç©ºï¼Œå¦‚ä¸ä¸ºç©ºï¼Œåˆ™å‡ºæ ˆä¸€ä¸ªå·¦æ‹¬å·`(`çš„ä¸‹æ ‡ï¼Œå¹¶å°†åŒ¹é…åˆ°çš„å·¦å³æ‹¬å·çš„ä¸‹æ ‡éƒ½æ¨å…¥`stack_right`ï¼›å¦‚æœ`stack_left`ä¸ºç©ºï¼Œåˆ™ä¸¢å¼ƒæ”¹å­—ç¬¦ï¼Œç»§ç»­å¾ªç¯ï¼›
3. éå†å®Œæˆä¹‹åï¼Œæˆ‘ä»¬å¾—åˆ°äº†åŒ…å«æ‰€æœ‰åŒ¹é…å®Œæ•´çš„æ‹¬å·çš„ä¸‹æ ‡ä¿¡æ¯`stack_right`ï¼Œå¯¹å…¶ä¸­çš„ä¸‹æ ‡æŒ‰ç…§å‡åºè¿›è¡Œæ’åºï¼ˆ__æ—¶é—´å¤æ‚åº¦ä¸å¤Ÿä½çš„åŸå› __ï¼‰ï¼›ç„¶åéå†æ’åºåçš„`stack_right`ï¼ŒæŸ¥æ‰¾æ–­ç‚¹ï¼ˆå³è®¡ç®—æ¯ä¸€ä¸ªè¿ç»­å—çš„å­ä¸²é•¿åº¦ï¼‰ï¼Œè·å–æœ€é•¿æœ‰æ•ˆæ‹¬å·å­ä¸²é•¿åº¦ï¼ˆä»æ¯ä¸ªè¿ç»­å—å­ä¸²é•¿åº¦ä¸­é€‰æ‹©æœ€é•¿çš„ä½œä¸ºè¾“å‡ºï¼‰ã€‚

## 3. ä»£ç å®ç°
__Python__
```python
class Solution:
    def longestValidParentheses(self, s: str) -> int:
        # ä½¿ç”¨ æ ˆ è¿›è¡Œåˆ¤æ–­ï¼Ÿ
        stack_left = []
        stack_right = []
        for idx, c in enumerate(s):
            if c == '(':
                # å·¦æ‹¬å·: å…¥æ ˆ
                stack_left.append(idx)
                continue
            else:
                # å³æ‹¬å·: åˆ¤æ–­æ ˆä¸­æ˜¯å¦å­˜åœ¨ä¸ä¹‹åŒ¹é…çš„å·¦æ‹¬å·ï¼Œå­˜åœ¨åˆ™ tmp_len + 2ï¼Œå¹¶å‡ºæ ˆä¸€ä¸ªå·¦æ‹¬å·
                # å¦åˆ™åˆ¤æ–­ max_len ä¸ tmp_len çš„å¤§å°ï¼Œå¹¶é‡ç½® tmp_len = 0
                if len(stack_left) != 0:
                    # stack_right.append([stack_left[-1], idx])
                    stack_right.append(stack_left[-1])
                    stack_right.append(idx)
                    stack_left.pop()
        
        # æ’åº
        stack_right.sort()
        if len(stack_right) == 0:
            return 0
        
        # æ–­ç‚¹
        max_len = 0
        tmp_len = 1
        for i in range(1, len(stack_right)):
            if stack_right[i] - stack_right[i-1] == 1:
                tmp_len += 1
            else:
                max_len = max(max_len, tmp_len)
                tmp_len = 1
        max_len = max(max_len, tmp_len)
        return max_len
```

__C++__
æˆ‘åˆæ²¡å†™ï¼